<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>U.S. Federal Org Chart Viewer</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { margin-top: 40px; }
    pre { background: #f4f4f4; padding: 10px; overflow-x: auto; border-radius: 5px; }
    summary { font-weight: bold; font-size: 1.1em; margin-top: 10px; cursor: pointer; }
    details { margin-bottom: 12px; }
  </style>
</head>
<body>
  <h1>U.S. Federal Org Chart Viewer</h1>
  <p>This page automatically loads all JSON files from <code>docs/org/</code>.</p>
  <div id="charts"></div>

  <script>
    const container = document.getElementById("charts");
    const jsonFiles = [
      "federal_org_chart_max_comprehensive.json"
      // Add more filenames here if needed
    ];

    function createDetails(obj, depth = 0) {
      if (!obj || !obj.name) return "";
      const children = (obj.children || []).map(child => createDetails(child, depth + 1)).join("");
      const pad = " ".repeat(depth);
      return children
        ? \`<details open><summary>\${pad}<strong>\${obj.name}</strong></summary>\${children}</details>\`
        : \`<div style="margin-left:\${depth * 20}px">\${pad}• \${obj.name}</div>\`;
    }

    jsonFiles.forEach(file => {
      fetch("org/" + file)
        .then(res => res.json())
        .then(data => {
          const section = document.createElement("section");
          section.innerHTML = \`
            <h2>\${data.name}</h2>
            \${createDetails(data)}
          \`;
          container.appendChild(section);
        })
        .catch(err => {
          container.innerHTML += "<p style='color:red;'>Error loading " + file + "</p>";
        });
    });
  </script>
</body>
</html>
